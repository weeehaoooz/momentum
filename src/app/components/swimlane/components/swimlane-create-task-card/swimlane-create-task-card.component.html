<div class="create-task__card" [style.border-color]="borderColor()">
  <div class="create-task__header">
    <h3>New Task</h3>
    <button class="mom-icon__btn" (click)="toggleNewTaskCard()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="taskForm" (ngSubmit)="createTask()">
    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Task</mat-label>
      <input matInput formControlName="message" placeholder="task" required>
      <mat-error *ngIf="taskForm.get('message')?.hasError('required')">Task is required.</mat-error>
      <mat-error *ngIf="taskForm.get('message')?.hasError('maxlength')">Task cannot exceed 256 characters.</mat-error>
    </mat-form-field>

    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description" placeholder="describe the task"></textarea>
    </mat-form-field>

    <mat-form-field subscriptSizing="dynamic">
      <mat-label>Priority</mat-label>
      <mat-icon matSuffix class="dropdown-icon">keyboard_arrow_down</mat-icon>
      <mat-select formControlName="priority">
        <mat-select-trigger>
          {{ (taskForm.get('priority')?.value || '') | titlecase }}
        </mat-select-trigger>
        @for (p of priorities; track $index) {
        <mat-option [value]="p">
          <span class="priority-option">
            <mat-icon class="priority-icon material-symbols-rounded" [ngStyle]="{'color': priorityIconColor(p)}"
              [class.empty]="priorityIconColor(p) === ''" aria-hidden="true">
              {{ priorityIcon(p) }}
            </mat-icon>
            <span class="priority-label">{{ p | titlecase }}</span>
          </span>
        </mat-option>
        }
      </mat-select>
    </mat-form-field>
    <button matButton="tonal" color="primary" type="submit">Create Task</button>
  </form>
</div>